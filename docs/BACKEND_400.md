# Ошибка 400 (Bad Request) от бэкенда

Кратко: **400** значит, что сервер отклонил запрос из‑за неверного формата или данных. Ниже — частые причины и что проверить на фронте и бэке.

## Что уже исправлено на фронте

1. **Регистрация** — в теле запроса отправляются только `email` и `password` (поля имени/фамилии не используются).
2. **Content-Type** — для запросов через `apiClient` задаётся заголовок `Content-Type: application/json`.
3. **Сообщение от бэкенда** — при 400 в формах логина/регистрации показывается `response.data.message` или `response.data.error`, если бэкенд их отдаёт.

## Частые причины 400

| Причина | Где проверить | Что сделать |
|--------|----------------|-------------|
| Нет обязательных полей в теле | Документация API бэкенда | Добавить поля в тип и в отправляемый объект (как с `firstName`/`lastName`). |
| Другое имя полей (camelCase vs snake_case) | Контракт API | Привести имена полей к тому, что ждёт бэкенд (в `authApi` или через адаптер). |
| Неверный формат (например, дата, email) | Валидация на бэке | Проверить формат на фронте и при необходимости показывать подсказку пользователю. |
| Неверный тип (число вместо строки и т.п.) | Типы в API | В запрос передавать типы как в контракте (например, `bookId` как число в `reserveBook`). |
| Пустой или неверный `baseURL` | `.env`: `VITE_API_BASE_URL` | Указать корректный URL бэкенда (например, `http://localhost:8080`). |

## Как отладить

1. **Сеть (DevTools → Network)** — смотреть запрос: URL, метод, заголовки, тело. Сравнить с тем, что описано в API бэкенда.
2. **Ответ при 400** — в теле ответа часто есть `message` или `error` с пояснением. Это сообщение теперь выводится в формах входа/регистрации.
3. **Бэкенд** — проверить логи сервера и валидацию (например, Spring — сообщения валидации, Nest — class-validator и т.д.).

## Эндпоинты, которые использует фронт

- `POST /auth/login` — тело: `{ email, password }`
- `POST /auth/register` — тело: `{ email, password, firstName, lastName }` (или `first_name`, `last_name` при необходимости)
- `GET /me/me` — профиль (с заголовком `Authorization`)
- `GET /books`, `GET /books/:id`
- `POST /reservations/:bookId`, `POST /reservations/:id/take`, `POST /reservations/:id/return`, `DELETE /reservations/:id`
- `GET /reservations/my`, `GET /reservations/my/active`

Убедитесь, что пути и форматы запросов/ответов совпадают с бэкендом.
